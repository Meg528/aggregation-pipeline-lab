"use strict";(self.webpackChunkaggregation_pipeline_workshop=self.webpackChunkaggregation_pipeline_workshop||[]).push([[490],{435:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var t=n(5893),o=n(1151);const s={},r="Combining stages",a={id:"simple-queries/combining-them-all",title:"Combining stages",description:"Up until now, we've just been using one stage in the pipeline. But the power of the aggregation pipeline is that we can use many stages, and the output of one will be the input of the next. Think of it as UNIX pipes or using functional programming with map, filter, reduce, flatmap, etc.",source:"@site/docs/30-simple-queries/5-combining-them-all.mdx",sourceDirName:"30-simple-queries",slug:"/simple-queries/combining-them-all",permalink:"/aggregation-pipeline-lab/docs/simple-queries/combining-them-all",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb-developer/aggregation-pipeline-lab/blob/main/docs/30-simple-queries/5-combining-them-all.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"$limit",permalink:"/aggregation-pipeline-lab/docs/simple-queries/limiting-results"},next:{title:"Writing long pipelines",permalink:"/aggregation-pipeline-lab/docs/simple-queries/writing-long-pipelines"}},l={},c=[];function p(e){const i={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.a)(),...e.components},{Details:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"combining-stages",children:"Combining stages"}),"\n",(0,t.jsxs)(i.p,{children:["Up until now, we've just been using one stage in the pipeline. But the power of the aggregation pipeline is that we can use many stages, and the output of one will be the input of the next. Think of it as UNIX pipes or using functional programming with ",(0,t.jsx)(i.code,{children:"map"}),", ",(0,t.jsx)(i.code,{children:"filter"}),", ",(0,t.jsx)(i.code,{children:"reduce"}),", ",(0,t.jsx)(i.code,{children:"flatmap"}),", etc."]}),"\n",(0,t.jsx)(i.p,{children:"Get 10 books from 2001 with 200 pages. Show only the title and authors."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"db.books.aggregate([\n    {$match: {year: 2001, pages: 200}}, {$project: {_id: 0, title: 1, authors: 1}}, {$limit: 10}\n])\n"})}),"\n",(0,t.jsxs)(i.p,{children:["\ud83d\udcbb Get 15 books from 1985 with 150 pages. Show only the ",(0,t.jsx)(i.code,{children:"title"}),", ",(0,t.jsx)(i.code,{children:"year"}),", ",(0,t.jsx)(i.code,{children:"totalInventory"})," and ",(0,t.jsx)(i.code,{children:"available"})," books. (If you don't remember which fields we have, the sample doc is ",(0,t.jsx)(i.a,{href:"/docs/simple-queries/project",children:"here"}),")"]}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Answer"}),(0,t.jsx)("div",{children:(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-js",children:"db.books.aggregate([\n    {$match: {year: 1985, pages: 150}}, {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}}, {$limit: 15}\n])\n"})})})]})]})}function d(e={}){const{wrapper:i}={...(0,o.a)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},1151:(e,i,n)=>{n.d(i,{Z:()=>a,a:()=>r});var t=n(7294);const o={},s=t.createContext(o);function r(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:i},e.children)}}}]);